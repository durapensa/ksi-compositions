name: simple_agent_coordination
type: orchestration
version: 1.0.0
description: Basic agent-to-agent coordination without complex turn_taking
author: ksi

variables:
  task: "coordinate on a simple optimization task"

agents:
  coordinator:
    component: "components/core/base_agent"
    vars:
      initial_prompt: |
        ## MANDATORY: Start your response with this exact JSON:
        {"event": "agent:status", "data": {"agent_id": "{{agent_id}}", "status": "coordinating", "role": "coordinator"}}
        
        You are a coordination agent. Your task: {{task}}
        
        Please:
        1. Analyze the task
        2. Create a simple plan
        3. Send a message to the helper agent with specific instructions
        
        After your analysis, end with:
        {"event": "message:send", "data": {"to": "helper", "message": "Please help with: [your specific request]"}}
  
  helper:
    component: "components/core/base_agent"
    vars:
      initial_prompt: |
        ## MANDATORY: Start your response with this exact JSON:
        {"event": "agent:status", "data": {"agent_id": "{{agent_id}}", "status": "ready", "role": "helper"}}
        
        You are a helper agent. Wait for instructions from the coordinator.
        
        When you receive a message, respond with your analysis and results.
        End your response with:
        {"event": "agent:status", "data": {"agent_id": "{{agent_id}}", "status": "completed", "role": "helper"}}

routing:
  rules:
    - pattern: "message:send"
      from: "coordinator"
      to: "helper"
    - pattern: "agent:response"
      from: "*"
      to: "!self"

coordination:
  # No turn_taking - let agents communicate freely
  termination:
    conditions:
      - timeout: 60
      - agent_completion_count: 2

metadata:
  tags: ["simple", "coordination", "test"]