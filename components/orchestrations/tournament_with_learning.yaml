name: tournament_with_learning
component_type: orchestration
version: 1.0.0
description: Tournament orchestration with SIMBA-based online learning
author: ksi

variables:
  num_agents: 3
  num_rounds: 2
  learning_threshold: 0.7
  task_prompt: "Analyze this dataset and provide insights: [1, 4, 7, 2, 9, 3, 8, 5]"

agents:
  analyst_v1:
    component: "components/agents/agent_analyst_basic"
    vars:
      variant: "basic"
    
  analyst_v2:
    component: "components/agents/agent_analyst_detailed"
    vars:
      variant: "detailed"
    
  analyst_v3:
    component: "components/agents/agent_analyst_concise"
    vars:
      variant: "concise"
    
  evaluator:
    component: "components/agents/agent_evaluator"
    
  judge:
    component: "components/agents/agent_judge"

routing:
  rules:
    # Analysts send responses to evaluator
    - pattern: "agent:response"
      from: "analyst_*"
      to: "evaluator"
    
    # Evaluator sends scores to orchestrator
    - pattern: "evaluation:complete"
      from: "evaluator"
      to: "orchestrator"
    
    # Judge provides final assessment
    - pattern: "tournament:complete"
      from: "judge"
      to: "orchestrator"

coordination:
  turn_taking:
    mode: "phased"
    phases:
      - name: "round_1"
        description: "First competition round"
        agents:
          - analyst_v1: "{{task_prompt}}"
          - analyst_v2: "{{task_prompt}}"
          - analyst_v3: "{{task_prompt}}"
      
      - name: "evaluate_1"
        description: "Evaluate round 1"
        agents:
          - evaluator: |
              Evaluate the performance of the three analysts based on:
              - Accuracy of insights
              - Clarity of communication
              - Actionability of recommendations
              Assign scores (0.0-1.0) to each agent.
      
      - name: "round_2"
        description: "Second competition round"
        agents:
          - analyst_v1: "Analyze this trend: Sales increased 15% in Q1, dropped 5% in Q2, increased 20% in Q3"
          - analyst_v2: "Analyze this trend: Sales increased 15% in Q1, dropped 5% in Q2, increased 20% in Q3"
          - analyst_v3: "Analyze this trend: Sales increased 15% in Q1, dropped 5% in Q2, increased 20% in Q3"
      
      - name: "final_judge"
        description: "Final assessment"
        agents:
          - judge: |
              Based on all competition rounds, determine:
              1. Which agent performed best overall
              2. Which agent showed most improvement
              3. Key learnings from the tournament
  
  termination:
    conditions:
      - event: "tournament:complete"
      - timeout: 300

metadata:
  tags: ["tournament", "optimization", "learning"]