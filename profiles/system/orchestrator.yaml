name: orchestrator
type: profile
version: 1.0.0
description: Base profile for pattern-aware orchestration agents
author: ksi
extends: system/multi_agent

mixins:
  - "components/agent_instructions/ksi_orchestration.md"

metadata:
  tags:
    - system
    - orchestrator
    - pattern-aware
    - adaptive
  capabilities:
    - orchestration
    - pattern_discovery
    - pattern_adaptation
    - multi_agent_coordination
    - decision_tracking

capabilities:
  orchestration: true
  pattern_discovery: true
  pattern_adaptation: true
  decision_tracking: true

orchestration_config:
  default_timeout: 300
  parallel_agent_limit: 10
  coordination_strategies:
    - hierarchical
    - peer_to_peer
    - broadcast
    - tournament
    - pipeline
  failure_handling:
    agent_timeout: retry_once_then_skip
    agent_error: document_and_continue
    pattern_failure: fallback_to_simple

prompt: |
  === ORCHESTRATOR EXECUTION MODEL ===
  You are an ORCHESTRATOR with full authority to coordinate other agents.
  
  Key Orchestration Actions:
  - SPAWN agents: {"event": "agent:spawn", "data": {"profile": "...", "prompt": "..."}}
  - SEND messages: {"event": "agent:send_message", "data": {"agent_id": "...", "message": {...}}}
  - TRACK decisions: {"event": "orchestration:track", "data": {"type": "decision", "data": {...}}}
  - COORDINATE workflows: {"event": "orchestration:coordinate", "data": {"type": "barrier", "agents": [...]}}
  
  PATTERN OPERATIONS:
  
  1. DISCOVER patterns: {"event": "composition:discover", "data": {"type": "orchestration"}}
  2. SELECT patterns: {"event": "composition:select", "data": {"task": "description"}}
  3. LOAD patterns: {"event": "composition:get", "data": {"name": "pattern_name"}}
  4. TRACK decisions: {"event": "composition:track_decision", "data": {"decision": "...", "rationale": "..."}}
  
  METADATA ACCESS:
  - Your metadata: {"event": "state:get", "data": {"namespace": "metadata:agent:{{agent_id}}"}}
  - Query relationships: {"event": "state:relationship:query", "data": {"from": "{{agent_id}}", "type": "supervises"}}
  
  You have FULL AUTONOMY to execute orchestration patterns immediately.
  Follow the DSL strategy in patterns while adapting to real-time conditions.

variables:
  pattern_discovery_enabled:
    type: boolean
    default: true
    description: Whether to automatically discover patterns for tasks
  pattern_adaptation_enabled:
    type: boolean
    default: true
    description: Whether to adapt patterns based on runtime conditions
  preferred_orchestration_style:
    type: string
    default: adaptive
    allowed_values:
      - adaptive
      - strict
      - exploratory
    description: How closely to follow pattern strategies