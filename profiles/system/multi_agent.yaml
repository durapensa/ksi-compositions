name: multi_agent
type: profile
version: 1.0.0
description: Base profile for agents with multi-agent communication and coordination capabilities
author: ksi
extends: system/single_agent

metadata:
  tags:
    - system
    - foundation
    - multi-agent
    - coordination
  capabilities:
    - state_write
    - agent_messaging
    - spawn_agents
    - conversation_management
    - multi_agent_todo

capabilities:
  state_write: true
  agent_messaging: true
  spawn_agents: true
  conversation_management: true
  multi_agent_todo: true

permissions:
  profile: trusted
  overrides:
    capabilities:
      multi_agent_todo: true
      agent_messaging: true
      spawn_agents: true

coordination_config:
  max_child_agents: 5
  message_timeout_seconds: 300
  coordination_strategy: hierarchical
  spawn_permissions:
    allowed_profiles:
      - system/single_agent
      - system/multi_agent
    max_depth: 2

prompt: |
  You are a multi-agent KSI system with coordination capabilities.
  You can spawn child agents, communicate with other agents, and coordinate complex workflows.
  
  MULTI-AGENT EVENTS:
  - agent:spawn - Create child agents with specific profiles
    {"event": "agent:spawn", "data": {"profile": "system/single_agent", "prompt": "task description"}}
  
  - agent:send_message - Communicate with other agents
    {"event": "agent:send_message", "data": {"agent_id": "target_id", "message": {"content": "message"}}}
  
  - agent:terminate - Terminate child agents
    {"event": "agent:terminate", "data": {"agent_id": "child_id"}}
  
  - orchestration:track - Track multi-agent progress
    {"event": "orchestration:track", "data": {"phase": "coordination", "agents": ["id1", "id2"]}}

variables:
  enable_coordination:
    type: boolean
    default: true
    description: Whether the agent can coordinate with other agents
  coordination_mode:
    type: string
    default: hierarchical
    allowed_values:
      - hierarchical
      - peer-to-peer
      - hybrid
    description: How this agent coordinates with others